â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ” GUIDE COMPLET : CONFIGURER GOOGLE SIGN-IN POUR FERMIER PRO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“± CE QUE VOUS ALLEZ CONFIGURER :
- Google OAuth pour Android (pour que les utilisateurs puissent se connecter avec Google)
- Les credentials nÃ©cessaires dans votre app mobile
- Les credentials nÃ©cessaires sur le backend (Render)

â±ï¸ TEMPS ESTIMÃ‰ : 15-20 minutes

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PARTIE 1 : OBTENIR LE SHA-1 DE VOTRE KEYSTORE ANDROID
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”‘ LE SHA-1 est l'empreinte digitale de votre application Android.
   Google l'utilise pour vÃ©rifier que c'est bien votre app qui fait la requÃªte.

MÃ‰THODE 1 : Via le site EAS (RECOMMANDÃ‰ - plus simple)
-------------------------------------------------------
1. âœ… Allez sur : https://expo.dev/accounts/brunell663/projects/fermier-pro/credentials
2. âœ… Connectez-vous avec votre compte Expo
3. âœ… SÃ©lectionnez : Android
4. âœ… Cherchez "Keystore" ou "Android Keystore"
5. âœ… Vous verrez quelque chose comme :
   
   SHA-1 Fingerprint: XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX
   
6. âœ… COPIEZ CE SHA-1 (format avec les deux-points)

MÃ‰THODE 2 : Via la ligne de commande (Alternative)
---------------------------------------------------
Si vous ne voyez pas le SHA-1 sur le site EAS :

1. TÃ©lÃ©chargez votre keystore depuis EAS
2. ExÃ©cutez cette commande (remplacez le chemin) :
   
   keytool -list -v -keystore chemin/vers/votre-keystore.jks
   
3. Cherchez la ligne "SHA1:" et copiez l'empreinte

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PARTIE 2 : CRÃ‰ER LES CREDENTIALS GOOGLE OAUTH
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ã‰TAPE 1 : Aller sur Google Cloud Console
-----------------------------------------
âœ… Ouvrez : https://console.cloud.google.com/
âœ… Connectez-vous avec votre compte Google

Ã‰TAPE 2 : CrÃ©er ou sÃ©lectionner un projet
------------------------------------------
âœ… En haut Ã  gauche, cliquez sur le sÃ©lecteur de projet
âœ… Soit :
   - CrÃ©ez un NOUVEAU projet : "Fermier Pro" ou "fermier-pro"
   - Ou sÃ©lectionnez un projet existant si vous en avez dÃ©jÃ  un

Ã‰TAPE 3 : Activer les APIs nÃ©cessaires
---------------------------------------
âœ… Dans le menu â‰¡ (hamburger), allez dans : APIs & Services > Library
âœ… Recherchez et activez ces APIs :
   1. "Google+ API" (ou "Google Identity")
   2. "Google Sign-In API"

Ã‰TAPE 4 : Configurer l'Ã©cran de consentement OAuth
---------------------------------------------------
âœ… Allez dans : APIs & Services > OAuth consent screen
âœ… SÃ©lectionnez : External (sauf si vous avez un Google Workspace)
âœ… Remplissez les informations :
   - App name: Fermier Pro
   - User support email: VOTRE_EMAIL@gmail.com
   - Developer contact email: VOTRE_EMAIL@gmail.com
âœ… Cliquez sur "Save and Continue"
âœ… Scopes : Vous pouvez sauter cette Ã©tape (par dÃ©faut c'est OK)
âœ… Test users : Ajoutez votre email pour tester
âœ… Cliquez sur "Save and Continue" jusqu'Ã  la fin

Ã‰TAPE 5 : CrÃ©er les OAuth 2.0 Client IDs
-----------------------------------------
âœ… Allez dans : APIs & Services > Credentials
âœ… Cliquez sur : + CREATE CREDENTIALS > OAuth 2.0 Client ID

ğŸ“± CLIENT ID ANDROID :
   1. Application type : Android
   2. Name : Fermier Pro Android
   3. Package name : com.brunell663.fermierpro
      (IMPORTANT : doit correspondre exactement Ã  votre app.json)
   4. SHA-1 certificate fingerprint : [COLLEZ VOTRE SHA-1 ICI]
      (Le SHA-1 que vous avez copiÃ© Ã  la Partie 1)
   5. Cliquez sur CREATE

âœ… Une fois crÃ©Ã©, vous verrez :
   - Client ID : XXXXXX-XXXXXXXX.apps.googleusercontent.com
   - Il n'y a PAS de Client Secret pour Android (c'est normal)

Ã‰TAPE 6 : CrÃ©er un Web Client ID (pour le backend)
---------------------------------------------------
âš ï¸  IMPORTANT : CrÃ©ez aussi un Client ID Web pour le backend

âœ… Cliquez encore sur : + CREATE CREDENTIALS > OAuth 2.0 Client ID
   1. Application type : Web application
   2. Name : Fermier Pro Backend
   3. Authorized redirect URIs : (laissez vide pour l'instant)
   4. Cliquez sur CREATE

âœ… Cette fois, vous aurez :
   - Client ID : YYYYYY-YYYYYYYY.apps.googleusercontent.com
   - Client secret : XXXXXXXXXXXXXXXXXXX
   
âœ… COPIEZ BIEN LE CLIENT SECRET (vous ne pourrez plus le revoir)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PARTIE 3 : CONFIGURER VOTRE APPLICATION MOBILE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ã‰TAPE 1 : CrÃ©er le fichier .env.local
--------------------------------------
âœ… Dans le dossier fermier-pro/, crÃ©ez un fichier nommÃ© : .env.local
âœ… Ajoutez-y :

EXPO_PUBLIC_GOOGLE_CLIENT_ID_ANDROID=VOTRE_ANDROID_CLIENT_ID.apps.googleusercontent.com
EXPO_PUBLIC_GOOGLE_CLIENT_ID_IOS=

(Remplacez par votre vrai Client ID Android de l'Ã‰TAPE 5)

Ã‰TAPE 2 : RedÃ©marrer l'application
-----------------------------------
âœ… ArrÃªtez Expo si il tourne (Ctrl+C)
âœ… Relancez : npx expo start --clear

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PARTIE 4 : CONFIGURER LE BACKEND (RENDER)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ã‰TAPE 1 : Mettre Ã  jour les variables d'environnement sur Render
-----------------------------------------------------------------
âœ… Allez sur : https://dashboard.render.com/
âœ… SÃ©lectionnez votre service : fermier-pro-backend
âœ… Allez dans : Environment
âœ… Ajoutez ou modifiez ces variables :

   GOOGLE_CLIENT_ID=VOTRE_WEB_CLIENT_ID.apps.googleusercontent.com
   GOOGLE_CLIENT_SECRET=VOTRE_CLIENT_SECRET
   
   (Utilisez le Client ID et Secret WEB de l'Ã‰TAPE 6)

âœ… Cliquez sur "Save Changes"
âœ… Le backend va redÃ©marrer automatiquement

Ã‰TAPE 2 : VÃ©rifier que le backend fonctionne
---------------------------------------------
âœ… Attendez que le redÃ©ploiement soit terminÃ©
âœ… VÃ©rifiez les logs sur Render pour voir s'il y a des erreurs

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PARTIE 5 : TESTER GOOGLE SIGN-IN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ã‰TAPE 1 : Tester sur votre tÃ©lÃ©phone
-------------------------------------
âœ… Ouvrez l'app Fermier Pro sur votre tÃ©lÃ©phone
âœ… Sur l'Ã©cran de connexion, cliquez sur le bouton Google
âœ… Vous devriez voir :
   1. Un navigateur s'ouvre
   2. Page de connexion Google
   3. SÃ©lectionnez votre compte Google
   4. Autorisez l'application
   5. Le navigateur se ferme
   6. Vous Ãªtes connectÃ© dans l'app !

Ã‰TAPE 2 : VÃ©rifier les logs
----------------------------
âœ… Backend (Render) :
   - Allez dans les logs Render
   - Vous devriez voir : "âœ… [Google API] Utilisateur rÃ©cupÃ©rÃ©: VOTRE_EMAIL"

âœ… Mobile :
   - Dans Metro bundler, vous devriez voir :
     "ğŸ” [Google OAuth] Token obtenu, envoi au backend..."

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PROBLÃˆMES COURANTS & SOLUTIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âŒ Erreur : "Invalid client ID"
   â†’ VÃ©rifiez que le Client ID dans .env.local est correct
   â†’ VÃ©rifiez que le package name correspond Ã  app.json

âŒ Erreur : "Token Google invalide"
   â†’ Le SHA-1 n'est pas correct
   â†’ VÃ©rifiez que vous avez bien utilisÃ© le SHA-1 de votre keystore EAS

âŒ Erreur : "Client authentication failed"
   â†’ Le Client Secret backend est incorrect
   â†’ VÃ©rifiez les variables d'environnement sur Render

âŒ Le navigateur ne s'ouvre pas
   â†’ VÃ©rifiez que expo-web-browser est bien installÃ©
   â†’ Essayez de redÃ©marrer l'app avec --clear

âŒ Le navigateur s'ouvre mais rien ne se passe
   â†’ VÃ©rifiez que le scheme "fermierpro" est bien dans app.json
   â†’ VÃ©rifiez que le redirect URI est correct

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
RÃ‰SUMÃ‰ DES CREDENTIALS NÃ‰CESSAIRES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Mobile (.env.local dans fermier-pro/) :
  âœ“ EXPO_PUBLIC_GOOGLE_CLIENT_ID_ANDROID

Backend (Variables Render) :
  âœ“ GOOGLE_CLIENT_ID (Web Client ID)
  âœ“ GOOGLE_CLIENT_SECRET

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PROCHAINES Ã‰TAPES APRÃˆS GOOGLE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Une fois Google Sign-In fonctionnel :
1. Tester en dÃ©tail l'authentification
2. CrÃ©er le build production (AAB) avec : eas build --platform android --profile production
3. TÃ©lÃ©charger le .aab
4. Publier sur Google Play Store

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

