# ðŸ”„ Diagramme de SÃ©quence - Kouakou

## ScÃ©nario: "Quel est le prix du marchÃ© ?"

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Utilisateur â”‚  â”‚useChatAgent  â”‚  â”‚ChatAgentService â”‚  â”‚FastPath      â”‚  â”‚Marketplace  â”‚
â”‚             â”‚  â”‚              â”‚  â”‚                 â”‚  â”‚Detector      â”‚  â”‚Actions      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚ "Quel est le    â”‚                    â”‚                 â”‚                 â”‚
       â”‚  prix du        â”‚                    â”‚                 â”‚                 â”‚
       â”‚  marchÃ© ?"      â”‚                    â”‚                 â”‚                 â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚ sendMessage()      â”‚                 â”‚                 â”‚
       â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚ NLP.process()   â”‚                 â”‚
       â”‚                 â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚ detectFastPath()â”‚                 â”‚
       â”‚                 â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚ Pattern match:  â”‚
       â”‚                 â”‚                    â”‚                 â”‚ "prix du marchÃ©"â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚ Return:         â”‚
       â”‚                 â”‚                    â”‚                 â”‚ action:         â”‚
       â”‚                 â”‚                    â”‚                 â”‚ marketplace_    â”‚
       â”‚                 â”‚                    â”‚                 â”‚ get_price_trendsâ”‚
       â”‚                 â”‚                    â”‚                 â”‚ confidence: 0.96â”‚
       â”‚                 â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚ extractParams() â”‚                 â”‚
       â”‚                 â”‚                    â”‚ (empty params)  â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚ validateAction() â”‚                 â”‚
       â”‚                 â”‚                    â”‚ (valid)         â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚ execute()       â”‚                 â”‚
       â”‚                 â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚ getPriceTrends()â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚ API: GET        â”‚
       â”‚                 â”‚                    â”‚                 â”‚ /marketplace/   â”‚
       â”‚                 â”‚                    â”‚                 â”‚ price-trends    â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚ Return:         â”‚
       â”‚                 â”‚                    â”‚                 â”‚ {               â”‚
       â”‚                 â”‚                    â”‚                 â”‚   success: true, â”‚
       â”‚                 â”‚                    â”‚                 â”‚   message:       â”‚
       â”‚                 â”‚                    â”‚                 â”‚   "ðŸ“Š Tendance  â”‚
       â”‚                 â”‚                    â”‚                 â”‚   des prix..."  â”‚
       â”‚                 â”‚                    â”‚                 â”‚ }               â”‚
       â”‚                 â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚ Build           â”‚                 â”‚
       â”‚                 â”‚                    â”‚ ChatMessage     â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚ Check refreshHint â”‚                 â”‚                 â”‚
       â”‚                 â”‚ (none)            â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚ Update state      â”‚                 â”‚                 â”‚
       â”‚                 â”‚ (messages)        â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚ "ðŸ“Š Tendance    â”‚                    â”‚                 â”‚                 â”‚
       â”‚  des prix..."   â”‚                    â”‚                 â”‚                 â”‚
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
```

## ScÃ©nario: "J'ai dÃ©pensÃ© 50000 FCFA"

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Utilisateur â”‚  â”‚useChatAgent  â”‚  â”‚ChatAgentService â”‚  â”‚FastPath      â”‚  â”‚Depense     â”‚
â”‚             â”‚  â”‚              â”‚  â”‚                 â”‚  â”‚Detector      â”‚  â”‚Actions     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚ "J'ai dÃ©pensÃ©   â”‚                    â”‚                 â”‚                 â”‚
       â”‚  50000 FCFA"    â”‚                    â”‚                 â”‚                 â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚ sendMessage()      â”‚                 â”‚                 â”‚
       â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚ NLP.process()   â”‚                 â”‚
       â”‚                 â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚ detectFastPath()â”‚                 â”‚
       â”‚                 â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚ Pattern:        â”‚
       â”‚                 â”‚                    â”‚                 â”‚ "depense"       â”‚
       â”‚                 â”‚                    â”‚                 â”‚ Montant: 50000  â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚ Return:         â”‚
       â”‚                 â”‚                    â”‚                 â”‚ action:         â”‚
       â”‚                 â”‚                    â”‚                 â”‚ create_depense  â”‚
       â”‚                 â”‚                    â”‚                 â”‚ params:         â”‚
       â”‚                 â”‚                    â”‚                 â”‚ { montant: 50000â”‚
       â”‚                 â”‚                    â”‚                 â”‚   }             â”‚
       â”‚                 â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚ extractParams() â”‚                 â”‚
       â”‚                 â”‚                    â”‚ (enrich params) â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚ validateAction()â”‚                 â”‚
       â”‚                 â”‚                    â”‚ (valid)         â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚ shouldConfirm() â”‚                 â”‚
       â”‚                 â”‚                    â”‚ (confidence     â”‚                 â”‚
       â”‚                 â”‚                    â”‚  >= 0.95)       â”‚                 â”‚
       â”‚                 â”‚                    â”‚ â†’ auto execute  â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚ execute()       â”‚                 â”‚
       â”‚                 â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚ createDepense() â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚ API: POST       â”‚
       â”‚                 â”‚                    â”‚                 â”‚ /finance/      â”‚
       â”‚                 â”‚                    â”‚                 â”‚ depenses       â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚ Return:         â”‚
       â”‚                 â”‚                    â”‚                 â”‚ {               â”‚
       â”‚                 â”‚                    â”‚                 â”‚   success: true,â”‚
       â”‚                 â”‚                    â”‚                 â”‚   message:      â”‚
       â”‚                 â”‚                    â”‚                 â”‚   "C'est       â”‚
       â”‚                 â”‚                    â”‚                 â”‚   enregistrÃ© !" â”‚
       â”‚                 â”‚                    â”‚                 â”‚   refreshHint:  â”‚
       â”‚                 â”‚                    â”‚                 â”‚   'finance'     â”‚
       â”‚                 â”‚                    â”‚                 â”‚ }               â”‚
       â”‚                 â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚ Build           â”‚                 â”‚
       â”‚                 â”‚                    â”‚ ChatMessage     â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚ Check refreshHint â”‚                 â”‚                 â”‚
       â”‚                 â”‚ (refreshHint ===  â”‚                 â”‚                 â”‚
       â”‚                 â”‚  'finance')       â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚ Dispatch Redux:   â”‚                 â”‚                 â”‚
       â”‚                 â”‚ loadDepenses()    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚ "C'est          â”‚                    â”‚                 â”‚                 â”‚
       â”‚  enregistrÃ© !"  â”‚                    â”‚                 â”‚                 â”‚
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
```

## ScÃ©nario: Clarification NÃ©cessaire

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Utilisateur â”‚  â”‚useChatAgent  â”‚  â”‚ChatAgentService â”‚  â”‚Clarification â”‚
â”‚             â”‚  â”‚              â”‚  â”‚                 â”‚  â”‚Service       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                 â”‚                    â”‚                 â”‚
       â”‚ "J'ai vendu"    â”‚                    â”‚                 â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚
       â”‚                 â”‚ sendMessage()      â”‚                 â”‚
       â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚
       â”‚                 â”‚                    â”‚ Detect:         â”‚
       â”‚                 â”‚                    â”‚ create_revenu  â”‚
       â”‚                 â”‚                    â”‚                 â”‚
       â”‚                 â”‚                    â”‚ analyzeAction() â”‚
       â”‚                 â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
       â”‚                 â”‚                    â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚ Missing:        â”‚
       â”‚                 â”‚                    â”‚                 â”‚ - montant       â”‚
       â”‚                 â”‚                    â”‚                 â”‚ - animal_ids    â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚ Return:         â”‚
       â”‚                 â”‚                    â”‚                 â”‚ needsClarif:    â”‚
       â”‚                 â”‚                    â”‚                 â”‚ true            â”‚
       â”‚                 â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚ Build           â”‚                 â”‚
       â”‚                 â”‚                    â”‚ clarification   â”‚                 â”‚
       â”‚                 â”‚                    â”‚ message         â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚ "Quel montant   â”‚                    â”‚                 â”‚                 â”‚
       â”‚  et quels       â”‚                    â”‚                 â”‚                 â”‚
       â”‚  porcs ?"       â”‚                    â”‚                 â”‚                 â”‚
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚ "500000 FCFA,   â”‚                    â”‚                 â”‚                 â”‚
       â”‚  P001 et P002"  â”‚                    â”‚                 â”‚                 â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚ sendMessage()      â”‚                 â”‚                 â”‚
       â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚ Detect:         â”‚                 â”‚
       â”‚                 â”‚                    â”‚ clarification   â”‚                 â”‚
       â”‚                 â”‚                    â”‚ response        â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚ Extract:        â”‚                 â”‚
       â”‚                 â”‚                    â”‚ - montant:      â”‚                 â”‚
       â”‚                 â”‚                    â”‚   500000        â”‚                 â”‚
       â”‚                 â”‚                    â”‚ - animal_ids:   â”‚                 â”‚
       â”‚                 â”‚                    â”‚   [P001, P002]  â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚ Merge with      â”‚                 â”‚
       â”‚                 â”‚                    â”‚ pending action  â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚ Execute action  â”‚                 â”‚
       â”‚                 â”‚                    â”‚ (now complete)  â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
       â”‚ "Vente          â”‚                    â”‚                 â”‚                 â”‚
       â”‚  enregistrÃ©e !" â”‚                    â”‚                 â”‚                 â”‚
       â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚                 â”‚                 â”‚
       â”‚                 â”‚                    â”‚                 â”‚                 â”‚
```
